{"id":"hq-2uz","title":"SlackLite: WebSocket real-time messaging","description":"attached_molecule: hq-wisp-ifr\nattached_at: 2026-01-22T21:24:03Z\n\nImplement WebSocket server in handlers/ws.go:\n\n**Connection Flow**\n1. Client connects to /ws?channel=\u003cid\u003e\n2. Server adds client to channel's broadcast list\n3. New messages broadcast to all clients in channel\n4. Handle disconnect cleanup\n\n**Message Format (JSON)**\n{\n  \"type\": \"message\",\n  \"channel_id\": \"...\",\n  \"author\": \"...\",\n  \"content\": \"...\",\n  \"created_at\": \"...\"\n}\n\nUse gorilla/websocket. Keep a map of channel -\u003e []connections.","status":"closed","priority":2,"issue_type":"task","assignee":"gastowndemo/polecats/rictus","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:19:47.024642-08:00","created_by":"mayor","updated_at":"2026-01-22T17:28:28.85008-08:00","closed_at":"2026-01-22T17:28:28.85008-08:00","close_reason":"Closed","dependencies":[{"issue_id":"hq-2uz","depends_on_id":"hq-wisp-ifr","type":"blocks","created_at":"2026-01-22T13:24:01.890618-08:00","created_by":"mayor"}]}
{"id":"hq-3q5","title":"SlackLite: REST API endpoints","description":"attached_molecule: hq-wisp-ayd\nattached_at: 2026-01-22T21:23:42Z\n\nImplement REST API in handlers/api.go:\n\n**Channels**\n- GET /api/channels - list all channels\n- POST /api/channels - create channel {name}\n- GET /api/channels/:id - get channel details\n\n**Messages**  \n- GET /api/channels/:id/messages - get messages (with pagination)\n- POST /api/channels/:id/messages - send message {content, author}\n\nUse standard library net/http with JSON responses.\nSimple error handling with HTTP status codes.","status":"closed","priority":2,"issue_type":"task","assignee":"gastowndemo/polecats/slit","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:19:40.607717-08:00","created_by":"mayor","updated_at":"2026-01-22T17:28:28.833872-08:00","closed_at":"2026-01-22T17:28:28.833872-08:00","close_reason":"Closed","dependencies":[{"issue_id":"hq-3q5","depends_on_id":"hq-wisp-ayd","type":"blocks","created_at":"2026-01-22T13:23:40.874456-08:00","created_by":"mayor"}]}
{"id":"hq-45c","title":"SlackLite: Frontend UI","description":"attached_molecule: hq-wisp-4ch\nattached_at: 2026-01-22T21:24:25Z\n\nCreate simple web frontend in static/:\n\n**Files**\n- index.html - main page structure\n- style.css - Slack-like styling\n- app.js - API calls and WebSocket handling\n\n**Layout**\n┌────────────┬─────────────────────────┐\n│  Channels  │      Messages           │\n│  --------  │                         │\n│  #general  │  [user1]: hello         │\n│  #random   │  [user2]: hi there      │\n│  + New     │                         │\n│            ├─────────────────────────┤\n│            │  [Type message...]  [⏎] │\n└────────────┴─────────────────────────┘\n\n**Features**\n- Auto-generate anonymous username on load\n- Channel list with create button\n- Message history + real-time updates\n- Simple, clean design (no frameworks)","status":"closed","priority":2,"issue_type":"task","assignee":"gastowndemo/polecats/dementus","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:19:55.642832-08:00","created_by":"mayor","updated_at":"2026-01-22T17:28:28.867785-08:00","closed_at":"2026-01-22T17:28:28.867785-08:00","close_reason":"Closed","dependencies":[{"issue_id":"hq-45c","depends_on_id":"hq-wisp-4ch","type":"blocks","created_at":"2026-01-22T13:24:24.679662-08:00","created_by":"mayor"}]}
{"id":"hq-54l","title":"SlackLite: Main server and routing","description":"Wire everything together in main.go:\n\n**Server Setup**\n- Initialize SQLite database\n- Register routes:\n  - /api/* -\u003e REST handlers\n  - /ws -\u003e WebSocket handler  \n  - /* -\u003e static file server\n- Create #general channel on first run\n\n**Config**\n- PORT env var (default 8080)\n- DB_PATH env var (default ./slacklite.db)\n\n**Run**\ngo run . \n# Server at http://localhost:8080","status":"open","priority":2,"issue_type":"task","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:20:11.333557-08:00","created_by":"mayor","updated_at":"2026-01-22T13:20:11.333557-08:00"}
{"id":"hq-6tf","title":"SlackLite: Anonymous identity system","description":"attached_molecule: hq-wisp-jmg\nattached_at: 2026-01-22T21:24:53Z\n\nSimple anonymous user identity:\n\n**Generation**\n- On page load, generate random name: adjective + animal\n- Examples: 'happy-penguin', 'swift-falcon', 'calm-otter'\n- Store in localStorage for session persistence\n\n**Implementation**\n- identity.go - word lists and generator\n- Frontend reads/stores identity in localStorage\n- No auth, no accounts - just fun names\n\nWord lists: ~50 adjectives + ~50 animals = 2500 combinations","status":"hooked","priority":2,"issue_type":"task","assignee":"gastowndemo/polecats/capable","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:20:04.104969-08:00","created_by":"mayor","updated_at":"2026-01-22T13:24:53.278153-08:00","dependencies":[{"issue_id":"hq-6tf","depends_on_id":"hq-wisp-jmg","type":"blocks","created_at":"2026-01-22T13:24:52.481214-08:00","created_by":"mayor"}]}
{"id":"hq-8cr","title":"POLECAT_DONE slit","description":"Exit: COMPLETED\nIssue: hq-3q5\nMR: ga-czc\nBranch: polecat/slit/hq-3q5@mkpyl2xw","status":"open","priority":2,"issue_type":"message","assignee":"gastowndemo/witness","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:26:28.025183-08:00","created_by":"gastowndemo/slit","updated_at":"2026-01-22T13:26:28.025183-08:00","labels":["from:gastowndemo/slit"],"ephemeral":true}
{"id":"hq-a9n","title":"POLECAT_DONE rictus","description":"Exit: COMPLETED\nIssue: hq-2uz\nMR: ga-3aq\nBranch: polecat/rictus/hq-2uz@mkpylkj0","status":"open","priority":2,"issue_type":"message","assignee":"gastowndemo/witness","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:30:43.575879-08:00","created_by":"gastowndemo/rictus","updated_at":"2026-01-22T13:30:43.575879-08:00","labels":["from:gastowndemo/rictus"],"ephemeral":true}
{"id":"hq-cv-2sjio","title":"Work: SlackLite: REST API endpoints","description":"Auto-created convoy tracking hq-3q5","status":"open","priority":2,"issue_type":"convoy","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:23:40.179988-08:00","created_by":"mayor","updated_at":"2026-01-22T13:23:40.179988-08:00","dependencies":[{"issue_id":"hq-cv-2sjio","depends_on_id":"hq-3q5","type":"tracks","created_at":"2026-01-22T13:23:40.349272-08:00","created_by":"mayor"}]}
{"id":"hq-cv-cjjio","title":"Work: SlackLite: Database schema and migrations","description":"Auto-created convoy tracking hq-e54","status":"open","priority":2,"issue_type":"convoy","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:22:59.254734-08:00","created_by":"mayor","updated_at":"2026-01-22T13:22:59.254734-08:00","dependencies":[{"issue_id":"hq-cv-cjjio","depends_on_id":"hq-e54","type":"tracks","created_at":"2026-01-22T13:22:59.364394-08:00","created_by":"mayor"}]}
{"id":"hq-cv-hva6s","title":"Work: SlackLite: Project setup and structure","description":"Auto-created convoy tracking hq-mqa","status":"open","priority":2,"issue_type":"convoy","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:22:39.97046-08:00","created_by":"mayor","updated_at":"2026-01-22T13:22:39.97046-08:00","dependencies":[{"issue_id":"hq-cv-hva6s","depends_on_id":"hq-mqa","type":"tracks","created_at":"2026-01-22T13:22:40.084669-08:00","created_by":"mayor"}]}
{"id":"hq-cv-omody","title":"Work: SlackLite: Frontend UI","description":"Auto-created convoy tracking hq-45c","status":"open","priority":2,"issue_type":"convoy","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:24:24.249581-08:00","created_by":"mayor","updated_at":"2026-01-22T13:24:24.249581-08:00","dependencies":[{"issue_id":"hq-cv-omody","depends_on_id":"hq-45c","type":"tracks","created_at":"2026-01-22T13:24:24.385643-08:00","created_by":"mayor"}]}
{"id":"hq-cv-wpvuy","title":"Work: SlackLite: Anonymous identity system","description":"Auto-created convoy tracking hq-6tf","status":"open","priority":2,"issue_type":"convoy","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:24:51.528883-08:00","created_by":"mayor","updated_at":"2026-01-22T13:24:51.528883-08:00","dependencies":[{"issue_id":"hq-cv-wpvuy","depends_on_id":"hq-6tf","type":"tracks","created_at":"2026-01-22T13:24:51.787699-08:00","created_by":"mayor"}]}
{"id":"hq-cv-yjawq","title":"Work: SlackLite: WebSocket real-time messaging","description":"Auto-created convoy tracking hq-2uz","status":"open","priority":2,"issue_type":"convoy","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:24:01.220865-08:00","created_by":"mayor","updated_at":"2026-01-22T13:24:01.220865-08:00","dependencies":[{"issue_id":"hq-cv-yjawq","depends_on_id":"hq-2uz","type":"tracks","created_at":"2026-01-22T13:24:01.363313-08:00","created_by":"mayor"}]}
{"id":"hq-deacon","title":"Deacon (daemon beacon) - receives mechanical heartbeats, runs town plugins and monitoring.","description":"Deacon (daemon beacon) - receives mechanical heartbeats, runs town plugins and monitoring.\n\nrole_type: deacon\nrig: null\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T12:34:34.285549-08:00","created_by":"Brian Scott","updated_at":"2026-01-22T12:34:34.285549-08:00","labels":["gt:agent"]}
{"id":"hq-e54","title":"SlackLite: Database schema and migrations","description":"attached_molecule: hq-wisp-1z8\nattached_at: 2026-01-22T21:23:00Z\n\nCreate SQLite database with tables:\n\n**channels**\n- id (TEXT PRIMARY KEY - UUID)\n- name (TEXT UNIQUE NOT NULL)\n- created_at (DATETIME)\n\n**messages**\n- id (TEXT PRIMARY KEY - UUID)\n- channel_id (TEXT FK)\n- author (TEXT - anonymous display name)\n- content (TEXT)\n- created_at (DATETIME)\n\nInclude db/schema.sql and db/db.go with:\n- InitDB() - creates tables\n- Basic CRUD operations","status":"closed","priority":1,"issue_type":"task","assignee":"gastowndemo/polecats/nux","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:19:33.888536-08:00","created_by":"mayor","updated_at":"2026-01-22T17:28:28.816779-08:00","closed_at":"2026-01-22T17:28:28.816779-08:00","close_reason":"Closed","dependencies":[{"issue_id":"hq-e54","depends_on_id":"hq-wisp-1z8","type":"blocks","created_at":"2026-01-22T13:22:59.618617-08:00","created_by":"mayor"}]}
{"id":"hq-kzk","title":"POLECAT_DONE furiosa","description":"Exit: COMPLETED\nIssue: hq-mqa\nMR: ga-rcc\nBranch: polecat/furiosa/hq-mqa@mkpyju5d","status":"open","priority":2,"issue_type":"message","assignee":"gastowndemo/witness","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:26:05.035791-08:00","created_by":"gastowndemo/furiosa","updated_at":"2026-01-22T13:26:05.035791-08:00","labels":["from:gastowndemo/furiosa"],"ephemeral":true}
{"id":"hq-mayor","title":"Mayor - global coordinator, handles cross-rig communication and escalations.","description":"Mayor - global coordinator, handles cross-rig communication and escalations.\n\nrole_type: mayor\nrig: null\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T12:34:34.204445-08:00","created_by":"Brian Scott","updated_at":"2026-01-22T12:34:34.204445-08:00","labels":["gt:agent"]}
{"id":"hq-mqa","title":"SlackLite: Project setup and structure","description":"attached_molecule: hq-wisp-r5f\nattached_at: 2026-01-22T21:22:41Z\n\nCreate the slacklite/ directory with:\n- main.go (entry point)\n- go.mod (dependencies)\n- static/ (frontend assets)\n- db/ (database package)\n\nTech stack:\n- Go 1.21+\n- SQLite (github.com/mattn/go-sqlite3)\n- gorilla/websocket\n- No external frontend framework","status":"closed","priority":1,"issue_type":"task","assignee":"gastowndemo/polecats/furiosa","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:19:26.394455-08:00","created_by":"mayor","updated_at":"2026-01-22T17:28:28.795507-08:00","closed_at":"2026-01-22T17:28:28.795507-08:00","close_reason":"Closed","dependencies":[{"issue_id":"hq-mqa","depends_on_id":"hq-wisp-r5f","type":"blocks","created_at":"2026-01-22T13:22:40.45751-08:00","created_by":"mayor"}]}
{"id":"hq-q1a","title":"POLECAT_DONE dementus","description":"Exit: COMPLETED\nIssue: hq-45c\nMR: ga-1o8\nBranch: polecat/dementus/hq-45c@mkpym1b6","status":"open","priority":2,"issue_type":"message","assignee":"gastowndemo/witness","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:28:23.255676-08:00","created_by":"gastowndemo/dementus","updated_at":"2026-01-22T13:28:23.255676-08:00","labels":["from:gastowndemo/dementus"],"ephemeral":true}
{"id":"hq-q3v","title":"POLECAT_DONE nux","description":"Exit: COMPLETED\nIssue: hq-e54\nMR: ga-1rj\nBranch: polecat/nux/hq-e54@mkpyk904","status":"open","priority":2,"issue_type":"message","assignee":"gastowndemo/witness","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:27:05.103146-08:00","created_by":"gastowndemo/nux","updated_at":"2026-01-22T13:27:05.103146-08:00","labels":["from:gastowndemo/nux"],"ephemeral":true}
{"id":"hq-qhg","title":"POLECAT_DONE capable","description":"Exit: DEFERRED\nIssue: hq-6tf\nBranch: polecat/capable/hq-6tf@mkpymj7b","status":"open","priority":2,"issue_type":"message","assignee":"gastowndemo/witness","owner":"191290+bscott@users.noreply.github.com","created_at":"2026-01-22T13:27:29.15934-08:00","created_by":"gastowndemo/capable","updated_at":"2026-01-22T13:27:29.15934-08:00","labels":["from:gastowndemo/capable"],"ephemeral":true}
{"id":"hq-wisp-1bp","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:52.10076-08:00","updated_at":"2026-01-22T13:24:52.10076-08:00","dependencies":[{"issue_id":"hq-wisp-1bp","depends_on_id":"hq-wisp-jmg","type":"parent-child","created_at":"2026-01-22T13:24:52.116944-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-1bp","depends_on_id":"hq-wisp-k05","type":"blocks","created_at":"2026-01-22T13:24:52.149002-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-1m9","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: hq-e54\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:59.472748-08:00","updated_at":"2026-01-22T13:22:59.472748-08:00","dependencies":[{"issue_id":"hq-wisp-1m9","depends_on_id":"hq-wisp-1z8","type":"parent-child","created_at":"2026-01-22T13:22:59.479592-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-1m9","depends_on_id":"hq-wisp-2jj","type":"blocks","created_at":"2026-01-22T13:22:59.484704-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-1z8","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-22T13:22:59.470557-08:00","updated_at":"2026-01-22T13:22:59.470558-08:00","ephemeral":true}
{"id":"hq-wisp-2jj","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show hq-e54\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update hq-e54 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:59.472596-08:00","updated_at":"2026-01-22T13:22:59.472596-08:00","dependencies":[{"issue_id":"hq-wisp-2jj","depends_on_id":"hq-wisp-1z8","type":"parent-child","created_at":"2026-01-22T13:22:59.479069-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-2jj","depends_on_id":"hq-wisp-7e1","type":"blocks","created_at":"2026-01-22T13:22:59.484154-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-2kl","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:52.103612-08:00","updated_at":"2026-01-22T13:24:52.103612-08:00","dependencies":[{"issue_id":"hq-wisp-2kl","depends_on_id":"hq-wisp-jmg","type":"parent-child","created_at":"2026-01-22T13:24:52.123288-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-2kl","depends_on_id":"hq-wisp-1bp","type":"blocks","created_at":"2026-01-22T13:24:52.19833-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-360","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: hq-3q5\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:23:40.622135-08:00","updated_at":"2026-01-22T13:23:40.622135-08:00","dependencies":[{"issue_id":"hq-wisp-360","depends_on_id":"hq-wisp-ayd","type":"parent-child","created_at":"2026-01-22T13:23:40.633106-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-360","depends_on_id":"hq-wisp-mvc","type":"blocks","created_at":"2026-01-22T13:23:40.644782-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-3f3","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:23:40.621078-08:00","updated_at":"2026-01-22T13:23:40.621078-08:00","dependencies":[{"issue_id":"hq-wisp-3f3","depends_on_id":"hq-wisp-ayd","type":"parent-child","created_at":"2026-01-22T13:23:40.630856-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-3f3","depends_on_id":"hq-wisp-4w4","type":"blocks","created_at":"2026-01-22T13:23:40.643178-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-3s3","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (hq-3q5).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: hq-3q5\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:23:40.620314-08:00","updated_at":"2026-01-22T13:23:40.620314-08:00","dependencies":[{"issue_id":"hq-wisp-3s3","depends_on_id":"hq-wisp-ayd","type":"parent-child","created_at":"2026-01-22T13:23:40.626563-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-3s3","depends_on_id":"hq-wisp-d62","type":"blocks","created_at":"2026-01-22T13:23:40.634825-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-45c","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (hq-45c).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: hq-45c\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:24.505751-08:00","updated_at":"2026-01-22T13:24:24.505751-08:00","dependencies":[{"issue_id":"hq-wisp-45c","depends_on_id":"hq-wisp-4ch","type":"parent-child","created_at":"2026-01-22T13:24:24.509869-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-45c","depends_on_id":"hq-wisp-h5w","type":"blocks","created_at":"2026-01-22T13:24:24.51775-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-4ch","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-22T13:24:24.50413-08:00","updated_at":"2026-01-22T13:24:24.50413-08:00","ephemeral":true}
{"id":"hq-wisp-4e4","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:01.591098-08:00","updated_at":"2026-01-22T13:24:01.591098-08:00","dependencies":[{"issue_id":"hq-wisp-4e4","depends_on_id":"hq-wisp-ifr","type":"parent-child","created_at":"2026-01-22T13:24:01.619174-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-4e4","depends_on_id":"hq-wisp-ca6","type":"blocks","created_at":"2026-01-22T13:24:01.695227-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-4tp","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:24.506406-08:00","updated_at":"2026-01-22T13:24:24.506406-08:00","dependencies":[{"issue_id":"hq-wisp-4tp","depends_on_id":"hq-wisp-4ch","type":"parent-child","created_at":"2026-01-22T13:24:24.512876-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-4tp","depends_on_id":"hq-wisp-cow","type":"blocks","created_at":"2026-01-22T13:24:24.520441-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-4w4","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:23:40.620915-08:00","updated_at":"2026-01-22T13:23:40.620916-08:00","dependencies":[{"issue_id":"hq-wisp-4w4","depends_on_id":"hq-wisp-ayd","type":"parent-child","created_at":"2026-01-22T13:23:40.630102-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-4w4","depends_on_id":"hq-wisp-59t","type":"blocks","created_at":"2026-01-22T13:23:40.640797-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-59t","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to hq-3q5 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:23:40.620723-08:00","updated_at":"2026-01-22T13:23:40.620723-08:00","dependencies":[{"issue_id":"hq-wisp-59t","depends_on_id":"hq-wisp-ayd","type":"parent-child","created_at":"2026-01-22T13:23:40.629158-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-59t","depends_on_id":"hq-wisp-lsx","type":"blocks","created_at":"2026-01-22T13:23:40.636822-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-5de","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show hq-45c\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update hq-45c --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:24.506778-08:00","updated_at":"2026-01-22T13:24:24.506778-08:00","dependencies":[{"issue_id":"hq-wisp-5de","depends_on_id":"hq-wisp-4ch","type":"parent-child","created_at":"2026-01-22T13:24:24.514743-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-5de","depends_on_id":"hq-wisp-dvc","type":"blocks","created_at":"2026-01-22T13:24:24.52225-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-5wq","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to hq-e54 should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:59.472135-08:00","updated_at":"2026-01-22T13:22:59.472135-08:00","dependencies":[{"issue_id":"hq-wisp-5wq","depends_on_id":"hq-wisp-1z8","type":"parent-child","created_at":"2026-01-22T13:22:59.477351-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-5wq","depends_on_id":"hq-wisp-63m","type":"blocks","created_at":"2026-01-22T13:22:59.481736-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-63m","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (hq-e54)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: hq-e54\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:59.471947-08:00","updated_at":"2026-01-22T13:22:59.471947-08:00","dependencies":[{"issue_id":"hq-wisp-63m","depends_on_id":"hq-wisp-1z8","type":"parent-child","created_at":"2026-01-22T13:22:59.47607-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-63m","depends_on_id":"hq-wisp-6hj","type":"blocks","created_at":"2026-01-22T13:22:59.480961-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-64g","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (hq-6tf)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: hq-6tf\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:52.098218-08:00","updated_at":"2026-01-22T13:24:52.098218-08:00","dependencies":[{"issue_id":"hq-wisp-64g","depends_on_id":"hq-wisp-jmg","type":"parent-child","created_at":"2026-01-22T13:24:52.113263-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-64g","depends_on_id":"hq-wisp-aew","type":"blocks","created_at":"2026-01-22T13:24:52.145753-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-6hj","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (hq-e54).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: hq-e54\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:59.471587-08:00","updated_at":"2026-01-22T13:22:59.471587-08:00","dependencies":[{"issue_id":"hq-wisp-6hj","depends_on_id":"hq-wisp-1z8","type":"parent-child","created_at":"2026-01-22T13:22:59.474755-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-6hj","depends_on_id":"hq-wisp-c1g","type":"blocks","created_at":"2026-01-22T13:22:59.480511-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-7e1","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:59.472449-08:00","updated_at":"2026-01-22T13:22:59.472449-08:00","dependencies":[{"issue_id":"hq-wisp-7e1","depends_on_id":"hq-wisp-1z8","type":"parent-child","created_at":"2026-01-22T13:22:59.478574-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-7e1","depends_on_id":"hq-wisp-i5v","type":"blocks","created_at":"2026-01-22T13:22:59.483548-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-8ns","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to hq-mqa should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:40.286636-08:00","updated_at":"2026-01-22T13:22:40.286636-08:00","dependencies":[{"issue_id":"hq-wisp-8ns","depends_on_id":"hq-wisp-r5f","type":"parent-child","created_at":"2026-01-22T13:22:40.289623-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-8ns","depends_on_id":"hq-wisp-eyk","type":"blocks","created_at":"2026-01-22T13:22:40.293044-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-8p4","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before hq-mqa\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:40.286193-08:00","updated_at":"2026-01-22T13:22:40.286193-08:00","dependencies":[{"issue_id":"hq-wisp-8p4","depends_on_id":"hq-wisp-r5f","type":"parent-child","created_at":"2026-01-22T13:22:40.288272-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-8p4","depends_on_id":"hq-wisp-jb2","type":"blocks","created_at":"2026-01-22T13:22:40.291672-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-8zn","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before hq-2uz\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:01.587449-08:00","updated_at":"2026-01-22T13:24:01.587449-08:00","dependencies":[{"issue_id":"hq-wisp-8zn","depends_on_id":"hq-wisp-ifr","type":"parent-child","created_at":"2026-01-22T13:24:01.610129-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-8zn","depends_on_id":"hq-wisp-j11","type":"blocks","created_at":"2026-01-22T13:24:01.675231-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-aew","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (hq-6tf).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: hq-6tf\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:52.097412-08:00","updated_at":"2026-01-22T13:24:52.097412-08:00","dependencies":[{"issue_id":"hq-wisp-aew","depends_on_id":"hq-wisp-jmg","type":"parent-child","created_at":"2026-01-22T13:24:52.111687-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-aew","depends_on_id":"hq-wisp-yk4","type":"blocks","created_at":"2026-01-22T13:24:52.14392-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-ana","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: hq-mqa\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:40.287196-08:00","updated_at":"2026-01-22T13:22:40.287196-08:00","dependencies":[{"issue_id":"hq-wisp-ana","depends_on_id":"hq-wisp-r5f","type":"parent-child","created_at":"2026-01-22T13:22:40.291242-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-ana","depends_on_id":"hq-wisp-h3w","type":"blocks","created_at":"2026-01-22T13:22:40.295106-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-ayd","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-22T13:23:40.618323-08:00","updated_at":"2026-01-22T13:23:40.618323-08:00","ephemeral":true}
{"id":"hq-wisp-baf","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show hq-6tf           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: hq-6tf\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:52.095254-08:00","updated_at":"2026-01-22T13:24:52.095254-08:00","dependencies":[{"issue_id":"hq-wisp-baf","depends_on_id":"hq-wisp-jmg","type":"parent-child","created_at":"2026-01-22T13:24:52.104604-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-bu4","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show hq-45c           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: hq-45c\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:24.505264-08:00","updated_at":"2026-01-22T13:24:24.505264-08:00","dependencies":[{"issue_id":"hq-wisp-bu4","depends_on_id":"hq-wisp-4ch","type":"parent-child","created_at":"2026-01-22T13:24:24.507318-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-c1g","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before hq-e54\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:59.471378-08:00","updated_at":"2026-01-22T13:22:59.471378-08:00","dependencies":[{"issue_id":"hq-wisp-c1g","depends_on_id":"hq-wisp-1z8","type":"parent-child","created_at":"2026-01-22T13:22:59.474152-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-c1g","depends_on_id":"hq-wisp-cyq","type":"blocks","created_at":"2026-01-22T13:22:59.480048-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-ca6","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to hq-2uz should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:01.590754-08:00","updated_at":"2026-01-22T13:24:01.590754-08:00","dependencies":[{"issue_id":"hq-wisp-ca6","depends_on_id":"hq-wisp-ifr","type":"parent-child","created_at":"2026-01-22T13:24:01.618287-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-ca6","depends_on_id":"hq-wisp-xrc","type":"blocks","created_at":"2026-01-22T13:24:01.693182-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-cow","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to hq-45c should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:24.506209-08:00","updated_at":"2026-01-22T13:24:24.506209-08:00","dependencies":[{"issue_id":"hq-wisp-cow","depends_on_id":"hq-wisp-4ch","type":"parent-child","created_at":"2026-01-22T13:24:24.511636-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-cow","depends_on_id":"hq-wisp-djp","type":"blocks","created_at":"2026-01-22T13:24:24.519524-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-cyq","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show hq-e54           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: hq-e54\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:59.471111-08:00","updated_at":"2026-01-22T13:22:59.471111-08:00","dependencies":[{"issue_id":"hq-wisp-cyq","depends_on_id":"hq-wisp-1z8","type":"parent-child","created_at":"2026-01-22T13:22:59.473131-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-d3r","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (hq-mqa).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: hq-mqa\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:40.286339-08:00","updated_at":"2026-01-22T13:22:40.286339-08:00","dependencies":[{"issue_id":"hq-wisp-d3r","depends_on_id":"hq-wisp-r5f","type":"parent-child","created_at":"2026-01-22T13:22:40.288734-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-d3r","depends_on_id":"hq-wisp-8p4","type":"blocks","created_at":"2026-01-22T13:22:40.292122-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-d62","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before hq-3q5\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:23:40.620045-08:00","updated_at":"2026-01-22T13:23:40.620045-08:00","dependencies":[{"issue_id":"hq-wisp-d62","depends_on_id":"hq-wisp-ayd","type":"parent-child","created_at":"2026-01-22T13:23:40.624982-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-d62","depends_on_id":"hq-wisp-h45","type":"blocks","created_at":"2026-01-22T13:23:40.633902-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-djp","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (hq-45c)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: hq-45c\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:24.506017-08:00","updated_at":"2026-01-22T13:24:24.506017-08:00","dependencies":[{"issue_id":"hq-wisp-djp","depends_on_id":"hq-wisp-4ch","type":"parent-child","created_at":"2026-01-22T13:24:24.510765-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-djp","depends_on_id":"hq-wisp-45c","type":"blocks","created_at":"2026-01-22T13:24:24.518597-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-dvc","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:24.506579-08:00","updated_at":"2026-01-22T13:24:24.506579-08:00","dependencies":[{"issue_id":"hq-wisp-dvc","depends_on_id":"hq-wisp-4ch","type":"parent-child","created_at":"2026-01-22T13:24:24.513961-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-dvc","depends_on_id":"hq-wisp-4tp","type":"blocks","created_at":"2026-01-22T13:24:24.521272-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-ecs","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: hq-45c\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:24.506989-08:00","updated_at":"2026-01-22T13:24:24.506989-08:00","dependencies":[{"issue_id":"hq-wisp-ecs","depends_on_id":"hq-wisp-4ch","type":"parent-child","created_at":"2026-01-22T13:24:24.516041-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-ecs","depends_on_id":"hq-wisp-5de","type":"blocks","created_at":"2026-01-22T13:24:24.523238-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-ewn","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show hq-2uz\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update hq-2uz --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:01.593109-08:00","updated_at":"2026-01-22T13:24:01.593109-08:00","dependencies":[{"issue_id":"hq-wisp-ewn","depends_on_id":"hq-wisp-ifr","type":"parent-child","created_at":"2026-01-22T13:24:01.663901-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-ewn","depends_on_id":"hq-wisp-oom","type":"blocks","created_at":"2026-01-22T13:24:01.697862-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-eyk","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (hq-mqa)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: hq-mqa\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:40.286491-08:00","updated_at":"2026-01-22T13:22:40.286491-08:00","dependencies":[{"issue_id":"hq-wisp-eyk","depends_on_id":"hq-wisp-r5f","type":"parent-child","created_at":"2026-01-22T13:22:40.289151-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-eyk","depends_on_id":"hq-wisp-d3r","type":"blocks","created_at":"2026-01-22T13:22:40.292595-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-h3w","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show hq-mqa\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update hq-mqa --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:40.287052-08:00","updated_at":"2026-01-22T13:22:40.287052-08:00","dependencies":[{"issue_id":"hq-wisp-h3w","depends_on_id":"hq-wisp-r5f","type":"parent-child","created_at":"2026-01-22T13:22:40.290835-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-h3w","depends_on_id":"hq-wisp-zd1","type":"blocks","created_at":"2026-01-22T13:22:40.294364-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-h45","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show hq-3q5           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: hq-3q5\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:23:40.619778-08:00","updated_at":"2026-01-22T13:23:40.619778-08:00","dependencies":[{"issue_id":"hq-wisp-h45","depends_on_id":"hq-wisp-ayd","type":"parent-child","created_at":"2026-01-22T13:23:40.622697-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-h5w","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before hq-45c\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:24.505535-08:00","updated_at":"2026-01-22T13:24:24.505535-08:00","dependencies":[{"issue_id":"hq-wisp-h5w","depends_on_id":"hq-wisp-4ch","type":"parent-child","created_at":"2026-01-22T13:24:24.5089-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-h5w","depends_on_id":"hq-wisp-bu4","type":"blocks","created_at":"2026-01-22T13:24:24.516969-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-i5v","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:59.472294-08:00","updated_at":"2026-01-22T13:22:59.472294-08:00","dependencies":[{"issue_id":"hq-wisp-i5v","depends_on_id":"hq-wisp-1z8","type":"parent-child","created_at":"2026-01-22T13:22:59.477994-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-i5v","depends_on_id":"hq-wisp-5wq","type":"blocks","created_at":"2026-01-22T13:22:59.482908-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-ifr","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-22T13:24:01.58135-08:00","updated_at":"2026-01-22T13:24:01.58135-08:00","ephemeral":true}
{"id":"hq-wisp-j11","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show hq-2uz           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: hq-2uz\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:01.585394-08:00","updated_at":"2026-01-22T13:24:01.585394-08:00","dependencies":[{"issue_id":"hq-wisp-j11","depends_on_id":"hq-wisp-ifr","type":"parent-child","created_at":"2026-01-22T13:24:01.606519-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-jb2","title":"Load context and verify assignment","description":"Initialize your session and understand your assignment.\n\n**1. Prime your environment:**\n```bash\ngt prime                    # Load role context\nbd prime                    # Load beads context\n```\n\n**2. Check your hook:**\n```bash\ngt hook               # Shows your pinned molecule and hook_bead\n```\n\nThe hook_bead is your assigned issue. Read it carefully:\n```bash\nbd show hq-mqa           # Full issue details\n```\n\n**3. Check inbox for additional context:**\n```bash\ngt mail inbox\n# Read any HANDOFF or assignment messages\n```\n\n**4. Understand the requirements:**\n- What exactly needs to be done?\n- What files are likely involved?\n- Are there dependencies or blockers?\n- What does \"done\" look like?\n\n**5. Verify you can proceed:**\n- No unresolved blockers on the issue\n- You understand what to do\n- Required resources are available\n\nIf blocked or unclear, mail Witness immediately:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Unclear requirements\" -m \"Issue: hq-mqa\nQuestion: \u003cwhat you need clarified\u003e\"\n```\n\n**Exit criteria:** You understand the work and can begin implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:40.285978-08:00","updated_at":"2026-01-22T13:22:40.285978-08:00","dependencies":[{"issue_id":"hq-wisp-jb2","depends_on_id":"hq-wisp-r5f","type":"parent-child","created_at":"2026-01-22T13:22:40.287498-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-jmg","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-22T13:24:52.091542-08:00","updated_at":"2026-01-22T13:24:52.091542-08:00","ephemeral":true}
{"id":"hq-wisp-k05","title":"Self-review changes","description":"Review your own changes before running tests.\n\n**1. Review the diff:**\n```bash\ngit diff origin/main...HEAD     # All changes vs main\ngit log --oneline origin/main..HEAD  # All commits\n```\n\n**2. Check for common issues:**\n\n| Category | Look For |\n|----------|----------|\n| Bugs | Off-by-one, null handling, edge cases |\n| Security | Injection, auth bypass, exposed secrets |\n| Style | Naming, formatting, code organization |\n| Completeness | Missing error handling, incomplete paths |\n| Cruft | Debug prints, commented code, TODOs |\n\n**3. Fix issues found:**\nDon't just note them - fix them now. Amend or add commits as needed.\n\n**4. Verify no unintended changes:**\n```bash\ngit diff --stat origin/main...HEAD\n# Only files relevant to hq-6tf should appear\n```\n\nIf you accidentally modified unrelated files, remove those changes.\n\n**Exit criteria:** Changes are clean, reviewed, and ready for testing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:52.099004-08:00","updated_at":"2026-01-22T13:24:52.099004-08:00","dependencies":[{"issue_id":"hq-wisp-k05","depends_on_id":"hq-wisp-jmg","type":"parent-child","created_at":"2026-01-22T13:24:52.114434-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-k05","depends_on_id":"hq-wisp-64g","type":"blocks","created_at":"2026-01-22T13:24:52.147222-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-lsx","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (hq-3q5)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: hq-3q5\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:23:40.620475-08:00","updated_at":"2026-01-22T13:23:40.620475-08:00","dependencies":[{"issue_id":"hq-wisp-lsx","depends_on_id":"hq-wisp-ayd","type":"parent-child","created_at":"2026-01-22T13:23:40.627973-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-lsx","depends_on_id":"hq-wisp-3s3","type":"blocks","created_at":"2026-01-22T13:23:40.635815-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-lzq","title":"Run tests and verify coverage","description":"Verify your changes don't break anything and are properly tested.\n\n**1. Run the full test suite:**\n```bash\ngo test ./...               # For Go projects\n# Or appropriate command for your stack\n```\n\n**ALL TESTS MUST PASS.** Do not proceed with failures.\n\n**2. If tests fail:**\n- Read the failure output carefully\n- Determine if your change caused it:\n  - If yes: Fix it. Return to implement step if needed.\n  - If no (pre-existing): File a bead, but still must pass for your PR\n\n```bash\n# Check if failure exists on main:\ngit stash\ngit checkout main\ngo test ./...\ngit checkout -\ngit stash pop\n```\n\n**3. Verify test coverage for new code:**\n- New features should have tests\n- Bug fixes should have regression tests\n- If you added significant code without tests, add them now\n\n**4. Run any other quality checks:**\n```bash\n# Linting (if configured)\ngolangci-lint run ./...\n\n# Build check\ngo build ./...\n```\n\n**Exit criteria:** All tests pass, new code has appropriate test coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:40.286779-08:00","updated_at":"2026-01-22T13:22:40.286779-08:00","dependencies":[{"issue_id":"hq-wisp-lzq","depends_on_id":"hq-wisp-r5f","type":"parent-child","created_at":"2026-01-22T13:22:40.290045-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-lzq","depends_on_id":"hq-wisp-8ns","type":"blocks","created_at":"2026-01-22T13:22:40.293474-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-mvc","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show hq-3q5\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update hq-3q5 --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:23:40.621237-08:00","updated_at":"2026-01-22T13:23:40.621237-08:00","dependencies":[{"issue_id":"hq-wisp-mvc","depends_on_id":"hq-wisp-ayd","type":"parent-child","created_at":"2026-01-22T13:23:40.632031-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-mvc","depends_on_id":"hq-wisp-3f3","type":"blocks","created_at":"2026-01-22T13:23:40.644039-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-oom","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:01.591835-08:00","updated_at":"2026-01-22T13:24:01.591835-08:00","dependencies":[{"issue_id":"hq-wisp-oom","depends_on_id":"hq-wisp-ifr","type":"parent-child","created_at":"2026-01-22T13:24:01.6438-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-oom","depends_on_id":"hq-wisp-4e4","type":"blocks","created_at":"2026-01-22T13:24:01.696523-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-p3l","title":"Verify tests pass on main","description":"Check if the codebase is healthy BEFORE starting your work.\n\n**The Scotty Principle:** Don't walk past a broken warp core. But also don't\nlet someone else's mess consume your entire mission.\n\n**1. Check tests on main:**\n```bash\ngit stash                   # Save your branch state\ngit checkout origin/main\ngo test ./...               # Or appropriate test command\n```\n\n**2. If tests PASS:**\n```bash\ngit checkout -              # Back to your branch\ngit stash pop               # Restore state\n```\nContinue to implement step.\n\n**3. If tests FAIL on main:**\n\nMake a judgment call:\n\n| Situation | Action |\n|-----------|--------|\n| Quick fix (\u003c15 min) | Fix it, commit to main, then continue |\n| Medium fix (15-60 min) | Fix if it blocks your work, else file bead |\n| Big fix (\u003e1 hour) | File bead, notify Witness, proceed with your work |\n\n**Quick fix path:**\n```bash\n# Fix the issue\ngit add \u003cfiles\u003e\ngit commit -m \"fix: \u003cdescription\u003e (pre-existing failure)\"\ngit push origin main\ngit checkout -\ngit stash pop\ngit rebase origin/main      # Get your fix\n```\n\n**File and proceed path:**\n```bash\nbd create --title \"Pre-existing test failure: \u003cdescription\u003e\" --type bug --priority 1\n\ngt mail send \u003crig\u003e/witness -s \"NOTICE: Main has failing tests\" -m \"Found pre-existing test failures on main.\nFiled: \u003cbead-id\u003e\nProceeding with my assigned work (hq-2uz).\"\n\ngit checkout -\ngit stash pop\n```\n\n**Context consideration:**\nIf fixing pre-existing failures consumed significant context:\n```bash\ngt handoff -s \"Fixed pre-existing failures, ready for assigned work\" -m \"Issue: hq-2uz\nFixed: \u003cwhat you fixed\u003e\nReady to start: implement step\"\n```\nFresh session continues from implement.\n\n**Exit criteria:** Tests pass on main (or issue filed), ready to implement.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:01.588343-08:00","updated_at":"2026-01-22T13:24:01.588343-08:00","dependencies":[{"issue_id":"hq-wisp-p3l","depends_on_id":"hq-wisp-ifr","type":"parent-child","created_at":"2026-01-22T13:24:01.615092-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-p3l","depends_on_id":"hq-wisp-8zn","type":"blocks","created_at":"2026-01-22T13:24:01.682584-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-p7r","title":"Prepare work for review","description":"Verify work is complete and ready for merge queue.\n\n**Note:** Do NOT close the issue. The Refinery will close it after successful merge.\nThis enables conflict-resolution retries without reopening closed issues.\n\n**1. Verify the issue shows your work:**\n```bash\nbd show hq-6tf\n# Status should still be 'in_progress' (you're working on it)\n```\n\n**2. Add completion notes:**\n```bash\nbd update hq-6tf --notes \"Implemented: \u003cbrief summary of what was done\u003e\"\n```\n\n**3. Sync beads:**\n```bash\nbd sync\n```\n\n**Exit criteria:** Issue updated with completion notes, beads synced.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:52.103907-08:00","updated_at":"2026-01-22T13:24:52.103907-08:00","dependencies":[{"issue_id":"hq-wisp-p7r","depends_on_id":"hq-wisp-jmg","type":"parent-child","created_at":"2026-01-22T13:24:52.12572-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-p7r","depends_on_id":"hq-wisp-2kl","type":"blocks","created_at":"2026-01-22T13:24:52.200928-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-r5f","title":"mol-polecat-work","description":"Full polecat work lifecycle from assignment through completion.\n\nThis molecule guides a polecat through a complete work assignment. Each step\nhas clear entry/exit criteria and specific commands to run. A polecat can\ncrash after any step and resume from the last completed step.\n\n## Polecat Contract (Self-Cleaning Model)\n\nYou are a self-cleaning worker. You:\n1. Receive work via your hook (pinned molecule + issue)\n2. Work through molecule steps using `bd ready` / `bd close \u003cstep\u003e`\n3. Complete and self-clean via `gt done` (submit + nuke yourself)\n4. You are GONE - Refinery merges from MQ\n\n**Self-cleaning:** When you run `gt done`, you push your work, submit to MQ,\nnuke your sandbox, and exit. There is no idle state. Done means gone.\n\n**Important:** This formula defines the template. Your molecule already has step\nbeads created from it. Use `bd ready` to find them - do NOT read this file directly.\n\n**You do NOT:**\n- Push directly to main (Refinery merges from MQ)\n- Close your own issue (Refinery closes after merge)\n- Wait for merge (you're gone after `gt done`)\n- Handle rebase conflicts (Refinery spawns fresh polecats for that)\n\n## Variables\n\n| Variable | Source | Description |\n|----------|--------|-------------|\n| issue | hook_bead | The issue ID you're assigned to work on |\n\n## Failure Modes\n\n| Situation | Action |\n|-----------|--------|\n| Tests fail | Fix them. Do not proceed with failures. |\n| Blocked on external | Mail Witness for help, mark yourself stuck |\n| Context filling | Use gt handoff to cycle to fresh session |\n| Unsure what to do | Mail Witness, don't guess |","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-22T13:22:40.285049-08:00","updated_at":"2026-01-22T13:22:40.28505-08:00","ephemeral":true}
{"id":"hq-wisp-uj4","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: hq-2uz\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:01.605495-08:00","updated_at":"2026-01-22T13:24:01.605495-08:00","dependencies":[{"issue_id":"hq-wisp-uj4","depends_on_id":"hq-wisp-ifr","type":"parent-child","created_at":"2026-01-22T13:24:01.667989-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-uj4","depends_on_id":"hq-wisp-ewn","type":"blocks","created_at":"2026-01-22T13:24:01.699976-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-xrc","title":"Implement the solution","description":"Do the actual implementation work.\n\n**Working principles:**\n- Follow existing codebase conventions\n- Make atomic, focused commits\n- Keep changes scoped to the assigned issue\n- Don't gold-plate or scope-creep\n\n**Commit frequently:**\n```bash\n# After each logical unit of work:\ngit add \u003cfiles\u003e\ngit commit -m \"\u003ctype\u003e: \u003cdescription\u003e (hq-2uz)\"\n```\n\nCommit types: feat, fix, refactor, test, docs, chore\n\n**Discovered work:**\nIf you find bugs or improvements outside your scope:\n```bash\nbd create --title \"Found: \u003cdescription\u003e\" --type bug --priority 2\n# Note the ID, continue with your work\n```\n\nDo NOT fix unrelated issues in this branch.\n\n**If stuck:**\nDon't spin for more than 15 minutes. Mail Witness:\n```bash\ngt mail send \u003crig\u003e/witness -s \"HELP: Stuck on implementation\" -m \"Issue: hq-2uz\nTrying to: \u003cwhat you're attempting\u003e\nProblem: \u003cwhat's blocking you\u003e\nTried: \u003cwhat you've attempted\u003e\"\n```\n\n**Exit criteria:** Implementation complete, all changes committed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:01.589134-08:00","updated_at":"2026-01-22T13:24:01.589134-08:00","dependencies":[{"issue_id":"hq-wisp-xrc","depends_on_id":"hq-wisp-ifr","type":"parent-child","created_at":"2026-01-22T13:24:01.616298-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-xrc","depends_on_id":"hq-wisp-p3l","type":"blocks","created_at":"2026-01-22T13:24:01.688153-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-xze","title":"Submit work and self-clean","description":"Submit your work and clean up. You cease to exist after this step.\n\n**Self-Cleaning Model:**\nOnce you run `gt done`, you're gone. The command:\n1. Pushes your branch to origin\n2. Creates an MR bead in the merge queue\n3. Nukes your sandbox (worktree removal)\n4. Exits your session immediately\n\n**Run gt done:**\n```bash\ngt done\n```\n\nYou should see output like:\n```\n✓ Work submitted to merge queue\n  MR ID: gt-xxxxx\n  Source: polecat/\u003cname\u003e\n  Target: main\n  Issue: hq-6tf\n✓ Sandbox nuked\n✓ Session exiting\n```\n\n**What happens next (not your concern):**\n- Refinery processes your MR from the queue\n- Refinery rebases and merges to main\n- Refinery closes the issue\n- If conflicts: Refinery spawns a FRESH polecat to re-implement\n\nYou are NOT involved in any of that. You're gone. Done means gone.\n\n**Exit criteria:** Work submitted, sandbox nuked, session exited.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:52.104135-08:00","updated_at":"2026-01-22T13:24:52.104135-08:00","dependencies":[{"issue_id":"hq-wisp-xze","depends_on_id":"hq-wisp-jmg","type":"parent-child","created_at":"2026-01-22T13:24:52.132731-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-xze","depends_on_id":"hq-wisp-p7r","type":"blocks","created_at":"2026-01-22T13:24:52.206458-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-yk4","title":"Set up working branch","description":"Ensure you're on a clean feature branch ready for work.\n\n**1. Check current branch state:**\n```bash\ngit status\ngit branch --show-current\n```\n\n**2. If not on a feature branch, create one:**\n```bash\n# Standard naming: polecat/\u003cyour-name\u003e or feature/\u003cissue-id\u003e\ngit checkout -b polecat/\u003cname\u003e\n```\n\n**3. Ensure clean working state:**\n```bash\ngit status                  # Should show \"working tree clean\"\ngit stash list              # Should be empty\n```\n\nIf dirty state from previous work:\n```bash\n# If changes are relevant to this issue:\ngit add -A \u0026\u0026 git commit -m \"WIP: \u003cdescription\u003e\"\n\n# If changes are unrelated cruft:\ngit stash push -m \"unrelated changes before hq-6tf\"\n# Or discard if truly garbage:\ngit checkout -- .\n```\n\n**4. Sync with main:**\n```bash\ngit fetch origin\ngit rebase origin/main      # Get latest, rebase your branch\n```\n\nIf rebase conflicts:\n- Resolve them carefully\n- Test after resolution\n- If stuck, mail Witness\n\n**Exit criteria:** You're on a clean feature branch, rebased on latest main.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:24:52.096136-08:00","updated_at":"2026-01-22T13:24:52.096136-08:00","dependencies":[{"issue_id":"hq-wisp-yk4","depends_on_id":"hq-wisp-jmg","type":"parent-child","created_at":"2026-01-22T13:24:52.106551-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-yk4","depends_on_id":"hq-wisp-baf","type":"blocks","created_at":"2026-01-22T13:24:52.13717-08:00","created_by":"mayor"}],"ephemeral":true}
{"id":"hq-wisp-zd1","title":"Clean up workspace","description":"Ensure workspace is pristine before handoff.\n\n**1. Check for uncommitted changes:**\n```bash\ngit status\n```\nMust show \"working tree clean\". If not:\n- Commit legitimate changes\n- Discard garbage: `git checkout -- .`\n\n**2. Check for untracked files:**\n```bash\ngit status --porcelain\n```\nShould be empty. If not:\n- Add to .gitignore if appropriate\n- Remove if temporary: `rm \u003cfile\u003e`\n- Commit if needed\n\n**3. Check stash:**\n```bash\ngit stash list\n```\nShould be empty. If not:\n- Pop and commit: `git stash pop \u0026\u0026 git add -A \u0026\u0026 git commit`\n- Or drop if garbage: `git stash drop`\n\n**4. Push your branch:**\n```bash\ngit push -u origin $(git branch --show-current)\n```\n\n**5. Verify nothing left behind:**\n```bash\ngit status                  # Clean\ngit stash list              # Empty\ngit log origin/main..HEAD   # Your commits\ngit diff origin/main...HEAD # Your changes (expected)\n```\n\n**Exit criteria:** Branch pushed, workspace clean, no cruft.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T13:22:40.286915-08:00","updated_at":"2026-01-22T13:22:40.286915-08:00","dependencies":[{"issue_id":"hq-wisp-zd1","depends_on_id":"hq-wisp-r5f","type":"parent-child","created_at":"2026-01-22T13:22:40.290436-08:00","created_by":"mayor"},{"issue_id":"hq-wisp-zd1","depends_on_id":"hq-wisp-lzq","type":"blocks","created_at":"2026-01-22T13:22:40.293914-08:00","created_by":"mayor"}],"ephemeral":true}
